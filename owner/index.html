<!DOCTYPE html>
<html>
<head>
    <title>RP Admin Console</title>
    <style>
        body { background: #020617; color: white; font-family: sans-serif; padding: 20px; }
        .card { background: #1e293b; padding: 20px; border-radius: 12px; max-width: 500px; margin: 0 auto 20px; border: 1px solid #334155; }
        h2 { margin-top: 0; color: #38bdf8; font-size: 1.2rem; }
        input, textarea, select { width: 100%; padding: 12px; margin: 8px 0; background: #0f172a; border: 1px solid #334155; color: white; border-radius: 8px; box-sizing: border-box; }
        button { width: 100%; padding: 12px; background: #2563eb; border: none; color: white; font-weight: bold; cursor: pointer; border-radius: 8px; }
        .strike-btn { background: #dc2626; }
    </style>
</head>
<body>

    <div class="card">
        <h2>üì¢ Send Announcement</h2>
        <form id="msgForm">
            <input type="text" id="mType" placeholder="Type (Announcement/Update)">
            <textarea id="mText" placeholder="Message content..." required></textarea>
            <button type="submit">Publish</button>
        </form>
    </div>

    <div class="card">
        <h2>üë• Add Staff</h2>
        <form id="staffForm">
            <input type="text" id="sName" placeholder="Username" required>
            <input type="text" id="sRole" placeholder="Role">
            <button type="submit">Save Staff</button>
        </form>
    </div>

    <div class="card">
        <h2>‚öñÔ∏è Issue Strike</h2>
        <form id="strikeForm">
            <input type="text" id="strName" placeholder="Staff Username" required>
            <select id="strLevel">
                <option value="S1">S1 (Warning)</option>
                <option value="S2">S2 (Minor)</option>
                <option value="S3">S3 (Major)</option>
                <option value="S4">S4 (Termination)</option>
            </select>
            <textarea id="strReason" placeholder="Reason..." required></textarea>
            <button type="submit" class="strike-btn">Issue Strike</button>
        </form>
    </div>

    <script>
        const API = 'https://sheetdb.io/api/v1/nsqoeik98h24t';

        // Helper function to talk to Google Sheets
        async function sendToSheet(sheetName, payload) {
            const btn = event.submitter;
            btn.innerText = "Processing...";
            await fetch('https://sheetdb.io/api/v1/nsqoeik98h24t?sheet=' + sheetName, {
                method: 'POST',
                headers: {'Content-Type': 'application/json'},
                body: JSON.stringify({ data: [payload] })
            });
            alert("Success!");
            location.reload();
        }

        document.getElementById('msgForm').onsubmit = e => {
            e.preventDefault();
            sendToSheet('Sheet1', { 
                type: document.getElementById('mType').value, 
                message: document.getElementById('mText').value, 
                date: new Date().toLocaleString() 
            });
        };

        document.getElementById('staffForm').onsubmit = e => {
            e.preventDefault();
            sendToSheet('staff', { 
                name: document.getElementById('sName').value, 
                role: document.getElementById('sRole').value, 
                date_added: new Date().toLocaleDateString() 
            });
        };

        document.getElementById('strikeForm').onsubmit = e => {
            e.preventDefault();
            sendToSheet('strikes', { 
                name: document.getElementById('strName').value, 
                strike_level: document.getElementById('strLevel').value, 
                reason: document.getElementById('strReason').value,
                date: new Date().toLocaleString()
            });
        };
    </script>
</body>
</html>

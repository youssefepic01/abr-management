<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>ABR Owner Console</title>
    <style>
        body { background: #020617; color: white; font-family: 'Segoe UI', sans-serif; padding: 20px; display: flex; flex-direction: column; align-items: center; }
        .card { background: #1e293b; padding: 20px; border-radius: 12px; width: 100%; max-width: 500px; margin-bottom: 25px; border: 1px solid #334155; box-shadow: 0 10px 15px -3px rgba(0,0,0,0.5); }
        h2 { color: #38bdf8; margin-top: 0; font-size: 1.2rem; }
        input { width: 100%; padding: 12px; background: #0f172a; border: 1px solid #334155; color: white; border-radius: 8px; box-sizing: border-box; margin-bottom: 12px; }
        button { width: 100%; padding: 12px; background: #38bdf8; border: none; border-radius: 8px; color: #020617; font-weight: bold; cursor: pointer; transition: 0.2s; }
        button:hover { background: #7dd3fc; }
        .staff-item { background: #0f172a; padding: 12px; border-radius: 8px; margin-top: 10px; display: flex; justify-content: space-between; align-items: center; border: 1px solid #1e293b; }
        .del-btn { background: #ef4444; color: white; padding: 6px 12px; width: auto; font-size: 12px; margin: 0; }
        .del-btn:hover { background: #b91c1c; }
    </style>
</head>
<body>

    <div class="card">
        <h2>üë• Add New Staff Member</h2>
        <form id="staffForm">
            <input type="text" id="stName" placeholder="Username" required>
            <input type="number" id="stID" placeholder="User ID Number" required>
            <input type="text" id="stRole" placeholder="Role (e.g. Senior Admin)" required>
            <button type="submit" id="addBtn">Add to Database</button>
        </form>
    </div>

    <div class="card">
        <h2>üõ†Ô∏è Manage Staff List</h2>
        <div id="manageList">Loading...</div>
    </div>

    <script>
        const API = 'https://sheetdb.io/api/v1/nsqoeik98h24?sheet=staff';

        // Load and Show Staff
        function loadStaff() {
            fetch(API).then(res => res.json()).then(data => {
                const list = document.getElementById('manageList');
                if (data.length === 0) { list.innerHTML = "No staff found."; return; }
                list.innerHTML = data.map(s => `
                    <div class="staff-item">
                        <div>
                            <b>${s.name}</b> <small style="color:#94a3b8">#${s.id}</small><br>
                            <span style="color:#38bdf8; font-size: 0.85rem;">${s.role}</span>
                        </div>
                        <button class="del-btn" onclick="deleteStaff('${s.name}')">Remove</button>
                    </div>
                `).join('');
            });
        }

        // Add Staff Logic
        document.getElementById('staffForm').onsubmit = e => {
            e.preventDefault();
            document.getElementById('addBtn').innerText = "Adding...";
            fetch(API, {
                method: 'POST',
                headers: {'Content-Type': 'application/json'},
                body: JSON.stringify({data: [{
                    name: document.getElementById('stName').value,
                    id: document.getElementById('stID').value,
                    role: document.getElementById('stRole').value,
                    date_added: new Date().toLocaleDateString()
                }]})
            }).then(() => location.reload());
        };

        // Delete Staff Logic
        function deleteStaff(name) {
            if(confirm("Remove " + name + " from staff?")) {
                fetch(`${API}/name/${name}`, { method: 'DELETE' })
                .then(() => location.reload());
            }
        }

        loadStaff();
    </script>
</body>
</html>
</body>
</html>

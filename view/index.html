<!DOCTYPE html>
<html>
<head>
    <title>RP Admin | Public Logs</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        :root { --bg: #0b1120; --side: #111827; --accent: #10b981; --text: #94a3b8; }
        body { margin: 0; display: flex; height: 100vh; background: var(--bg); color: white; font-family: sans-serif; }
        .sidebar { width: 250px; background: var(--side); padding: 20px; border-right: 1px solid #1e293b; flex-shrink: 0; }
        .logo { font-weight: bold; font-size: 1.2rem; margin-bottom: 30px; color: var(--accent); }
        .nav-item { padding: 12px; border-radius: 8px; color: var(--text); cursor: pointer; transition: 0.2s; margin-bottom: 5px; }
        .nav-item:hover { background: #1e293b; color: white; }
        .nav-item.active { background: var(--accent); color: white; }
        .main { flex: 1; padding: 40px; overflow-y: auto; }
        .section { display: none; }
        .section.active { display: block; }
        table { width: 100%; border-collapse: collapse; background: #1e293b; border-radius: 8px; min-width: 500px; }
        th, td { padding: 15px; text-align: left; border-bottom: 1px solid #334155; }
        .table-wrap { overflow-x: auto; border-radius: 8px; }
        .announcement-card { background: #1e293b; padding: 20px; border-radius: 12px; border-left: 4px solid var(--accent); margin-bottom: 15px; }
        
        @media (max-width: 768px) {
            body { flex-direction: column; }
            .sidebar { width: 100%; height: auto; border-right: none; border-bottom: 1px solid #1e293b; box-sizing: border-box; }
            .main { padding: 20px; }
        }
    </style>
</head>
<body>
    <div class="sidebar">
        <div class="logo">üìã Public Logs</div>
        <div class="nav-item active" onclick="showSection('announcements', this)">üì¢ Announcements</div>
        <div class="nav-item" onclick="showSection('staffList', this)">üë• Staff Team</div>
        <div class="nav-item" onclick="showSection('strikeLogs', this)">‚öñÔ∏è Strike Logs</div>
    </div>
    <div class="main">
        <div id="announcements" class="section active">
            <h1>Latest Announcements</h1>
            <div id="annContent">Loading...</div>
        </div>
        <div id="staffList" class="section">
            <h1>Staff Team</h1>
            <div class="table-wrap">
                <table><thead><tr><th>Name</th><th>Rank</th></tr></thead><tbody id="staffContent"></tbody></table>
            </div>
        </div>
        <div id="strikeLogs" class="section">
            <h1>Disciplinary Logs</h1>
            <div class="table-wrap">
                <table><thead><tr><th>Name</th><th>Level</th><th>Reason</th></tr></thead><tbody id="strikeContent"></tbody></table>
            </div>
        </div>
    </div>
    <script>
        const API = 'https://sheetdb.io/api/v1/nsqoeik98h24t';

        function showSection(id, el) {
            document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
            document.querySelectorAll('.nav-item').forEach(n => n.classList.remove('active'));
            document.getElementById(id).classList.add('active');
            el.classList.add('active');
        }

        async function loadData() {
            try {
                // 1. Load Announcements
                const a = await fetch(API + '?sheet=announcements');
                const aD = await a.json();
                document.getElementById('annContent').innerHTML = aD.length ? aD.reverse().map(i => `
                    <div class="announcement-card">
                        <h3>${i.type || 'Announcement'}</h3>
                        <p>${i.message || i.content || ''}</p>
                        <small style="color: #64748b">${i.date || ''}</small>
                    </div>`).join('') : "No announcements yet.";

                // 2. Load Staff
                const s = await fetch(API + '?sheet=staff');
                const sD = await s.json();
                document.getElementById('staffContent').innerHTML = sD.length ? sD.map(i => `
                    <tr><td>${i.name}</td><td>${i.role}</td></tr>`).join('') : "<tr><td colspan='2'>No staff found.</td></tr>";

                // 3. Load Strikes
                const st = await fetch(API + '?sheet=strikes');
                const stD = await st.json();
                document.getElementById('strikeContent').innerHTML = stD.length ? stD.reverse().map(i => `
                    <tr><td>${i.name}</td><td>${i.strike_level}</td><td>${i.reason}</td></tr>`).join('') : "<tr><td colspan='3'>No logs found.</td></tr>";

            } catch (e) {
                console.error(e);
                document.getElementById('annContent').innerHTML = "Error loading data. Make sure your Google Sheet tabs are named correctly.";
            }
        }

        loadData();
    </script>
</body>
</html>
